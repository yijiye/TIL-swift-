# 오픈소스
> 소스코드를 공개해 누구나 특별한 제한 없이 그 코드를 볼 수 있도록 한 소스코드

## 의존성 관리도구
> 외부 라이브러리를 사용할 때 프로젝트와 해당 라이브러리의 상관관계를 용이하게 관리해주는 도구

### 언어별 의존성 관리도구
- Java : Maven
- Javascript : Yarn / NPM
- Python : pyenv
- Cocoa / Cocoa Touch : Cocoapods, Carthage, Swift Package Manager
   - macOS 에서는 Cocoa, iOS 에서는 Cocoa Touch 라고 부름

### 특징
- 필수적인 것은 아니지만 사용하지 않을 경우 불필요한 공수가 필요하다.
- 일일히 기존 라이브러리를 삭제하고 새로 삽입시켜야하는 등의 불필요한 업무 진행시 휴먼에러도 문제가 될 수 있다.

## 오픈소스 작성시 주의할 점

- [오픈소스 비교표](https://olis.or.kr/license/compareGuide.do)
- 라이선스별로 다양한 조건이 있으니 반드시 확인해야함!
- 내 앱을 만들때와는 달리 모듈 밖에서 내 코드를 어떻게 사용할지에 대한 고민이 필요
- 다른 프로그래머가 내 라이브러리 모듈 내부의 코드를 어느 수준까지 사용하게 할지도 고려해야함!

### MIT 라이선스
- 제약조건이 낮고 자유도가 높은 편
- 이 소프트웨어를 누구라도 무상으로 제한없이 취급해도 좋다. (단, 저작권 표시 및 허가 표시를 소프트웨어의 모든 복제물 또는 중요한 부분에 기재해야한다.)
- 저자 또는 저작권자는 소프트웨어에 관해서 아무런 책임을 지지 않는다. (소스로 인한 피해는 전적으로 사용자가 감수)

----

# Cocoapods
> Swift 및 Objective-C 언어 환경 프로젝트의 의존성을 관리해주는 도구

- Cocoa, Cocoa Touch 프레임 워크에서 사용할 수 있는 라이브러리가 대다수
- `Podfile` 에 사용할 라이브러리만 명시해주면 자유롭게 프로젝트에서 사용할 수 있다.

## 라이브러리 만들기
- 접근제어자 중요 (open, public으로 선언되어야 다른 모듈에서 접근 가능)

## 라이브러리 배포
### .podspec 검증
- .podspec 파일에 이상이 없는지 확인해야함 
- 터미널에 `pod spec lint` 라고 입력하면 유효성 검증이 진행됨
- 오류가 발생하면 빨간색 표시, 검증에 성공하면 초록색 pass

### 계정 인증
- 터미널에 `pod trunk register {이메일} {이름}` 실행 -> 이메일 주소로 이메일이 오고 여기서 계정인증을 완료하면 됨

### 배포
- 터미널에 ` pod trunk push {라이브러리명}.podspec`

----

# 카르타고
> 코코아 어플리케이션에 간단한 프레임워크 (혹은 라이브러리)를 추가할 수 있도록 도와주는 의존성 관리도구

- 코코아팟과 다르게 프로젝트 파일이나 빌드 설정을 자동으로 수정하지 않음
- 맨처음 프레임워크를 만들때 딱 한번 빌드된다. => 빌드속도 빠름
- 빌드 시점에 라이브러리가 같이 빌드되지 않음
- 새로운 패키지를 가져다 쓸 때 마다 프레임워크를 추가해줘야하는 번거로움
- 새로운 프레임워크를 추가할 때 시간이 오래걸림
- 비주류 (요즘엔 거의 다 지원함...!)


----

# 스위프트 패키지 매니저
> 스위프트 패키지 매니저를 통해 애플이 의존성 관리 도구를 적극적으로 지원하기 시작함

- Xcode에서 스위프트 패키지 매니저를 공식적으로 지원 (터미널에서 안해도됨)

### 라이브러리 만들기
- Package.swift 파일만 추가하면 됨 (코코아팟에서 .podspec 파일의 역할과 동일)
- Package.swift 파일은 swift 언어로 작성되어 있으며 `swift-tools-version` 항목을 명시해야한다.

### 활용하기 (활용해봐야 알거같음)
#### Local 방식
-
#### Remote 방식
- Xcode의 메뉴 중 File -> Swift Packages -> Add Package Dependency 를 선택


## 스위프트 패키지 매니저 공식문서
- 스위프트 빌드 시스템과 통합되어 종속성을 다운로드, 컴파일 및 연결하는 프로세스를 자동화한다.

### Modules
- Swift는 코드를 모듈로 구성하며 각 모듈은 네임스페이스를 지정하고 모듈 외부에서 사용할 수 있는 코드의 액세스 규칙을 적용한다.
- 프로그램은 코드를 하나의 모듈에 모두 포함하거나, 의존하는 다른 모듈을 가져올 수 있다.
   - macOS : Darwin, Linux에서 제공하는 모듈을 제외하고나느 대부분을 다운로드 하고 빌드해야 사용할 수 있음

- 특정 문제를 해결하는 코드에 별도의 모듈을 사용하면 해당 코드를 다른 상황에서 재사용할 수 있다.
   - 예시 : 네트워크 요청 기능을 제공하는 모듈은 사진 공유 앱과 날씨 앱에서 공유될 수 있음

- 모듈을 사용하면 동일한 기능을 자체적으로 다시 구현하는 것보다 다른 개발자의 코드 위에 빌드할 수 있다.

### Packages
- 패키지는 swift 소스 파일과 manifest 파일로 구성된다. manifest 파일은 Package.swift는 PackageDescription 모듈을 사용하여 패키지의 이름과 내용을 정의한다.
- 패키지는 하나 이상의 target(대상)을 가지며 각 대상은 제품을 지정하고 하나 이상의 dependencies를 선언할 수 있다.

### Products
- target은 product로 라이브러리나 실행 파일 중 하나를 빌드할 수 있다.
- 라이브러리에는 다른 swift 코드에서 가져올 수 있는 모듈이 포함된다.
- 실행 파일은 운영 체제에서 실행할 수 있는 프로그램이다.

## Dependencies
- target의 의존성?종속성? 은 패키지의 코드에서 필요한 모듈이다. dependencies는 패키지 소스의 상대적인 or 절대적인 URL과 사용할 수 있는 패키지 버전에 대한 요구 사항 집합으로 구성된다.
- 패키지 관리자의 역할은 프로젝트의 모든 dependencies를 다운로드하고 빌드하는 프로세스를 자동화하여 조정 비용을 줄이는 것이다.
- 종속성은 자체적으로 종속성을 가질 수 있으며 각각은 종속성 그래프를 형성하는 종속성을 가질 수 있다....? 
- 패키지 관리자는 entire dependency graph를 충족하기 위해 필요한 모든 것을 다운로드하고 빌드한다.

패키지 관리자는 스위프트 3.0 이상에 포함되어 있습니다.
----

# 코코아팟 vs 카르타고 vs 스위프트 패키지 매니저 비교

## 코코아팟
- 단점
   - 라이브러리를 다운받아 설치하는데 오래걸림 
   - 프로젝트 빌드할때마다 모든 팟 라이브러리가 같이 빌드되므로 다른 도구를 사용할 때 보다 빌드시간이 오래걸림 

## 카르타고
- 단점
   - 의존성이 추가될 때마다 해줘야하는 번거로움
   - 비주류

## 스위프트 패키지 매니저 (애플이 지원함)
- 단점
   - 아직 지원하지 않는 라이브러리가 많다.
   - 해결되지 않은 이슈의 문제

----

[야곰닷넷 강의](https://yagom.net/courses/open-source-library/lessons/코코아팟-vs-카르타고-vs-스위프트-패키지-매니저-2/)

----

# 학습활동

- 의존성 관리도구를 사용하지 않는다면 어떻게 될까요?
   - 버전관리의 문제 (버전이 다를 경우 호환이 되지 않을 수 있다.)

- git과 의존성 관리도구를 같이 사용할 때 문제점
   - .gitignore : 변경사항을 추적되지 않을 파일을 정해줄 수 있다.
   - 라이브러리에서 받은 코드를 .gitignore에 넣어두지 않으면 커밋에 계속 남게되므로 자원낭비가 생긴다.
   
## iOS 환경에서 활용할 수 있는 의존성 관리도구의 종류에는 무엇무엇이 있을까?

- 코코아팟(CocoaPods)
- 카르타고(Carthage)
- 스위프트 패키지 매니저(Swift Package Manager)

## 각각의 의존성 관리도구의 장단점도 알아봅시다

### 코코아팟(CocoaPods)
- 장점
    1. 거의 모든 라이브러리를 지원한다.
    2. 의존성의 의존성까지 관리한다.
    3. 어떤 의존성이 애플리케이션에 있는지 알 수 있다. 

- 단점
    1. 라이브러리를 다운받아 설치하는데 시간이 오래걸린다.
    2. 프로젝트를 빌드 할 때마다 모든 팟 라이브러리가 같이 빌드되므로 다른 도구를 사용할 때 보다 빌드시간이 느리다.

### 카르타고(Carthage)
- 장점
    1. `carthage update`를 실행할 때 한 번 프레임워크를 빌드하므로 코코아팟에 비해 프로젝트 빌드 속도가 빠르다.
    2. 처음 프로젝트에 추가하는 것 이외에 설정이 바뀌지 않는다.

- 단점
    1. 새로운 패키지를 가져다 사용할 때 마다 프레임워크를 추가해줘야하는 번거로움이 있다.

### 스위프트 패키지 매니저(Swift Package Manager)
- 장점
    1. 애플이 지원한다.
    2. 기본적으로 내장되어있어 별다른 설치가 필요없다.
    3. 다른 OS에서도 사용할 수 있다.
    4. 터미널이 아닌 XCode에서 바로 사용이 가능하다.

- 단점
    1. 현 시점 해결되지 않은 이슈가 373건 있다. [참조](https://github.com/apple/swift-package-manager/labels)

## 의존성 관리도구를 사용하는 이유는?
- 사용하지 않는 경우, 일일히 기존 라이브러리를 삭제하고 새로 삽입시키는 등 불필요한 업무를 처리하면서 휴먼에러가 발생할 수 있다.

## 의존성 관리도구와 Git을 함께 사용할 때 주의할 점은?
- 협업 시, 다른 팀원들도 같은 의존성 관리도구를 사용해야한다.
- 외부 라이브러리의 버전이 계속 업데이트 되서 커밋마다 외부 라이브러리의 버전이 달라질 수 있다. 그래서 특정 커밋에 필요한 외부 라이브러리의 버전이 무엇인지 주의해야한다.
