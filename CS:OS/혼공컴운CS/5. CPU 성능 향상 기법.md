# 5. CPU 성능 향상 기법

# 학습내용
- 빠른 CPU를 위한 설계 기법
  - 클럭, 코어, 스레드
- 명령어 병렬 처리 기법
  - 파이프라이닝, 슈퍼스칼라, 비순차적 명령어 처리 기법
- CISC, RISC

# 빠른 CPU를 위한 설계 기법
## 클럭속도
CPU의 속도를 향상시키기 위해 어떤 방법이 있는지 학습했다.
가장 기본적으로 생각해 볼 수 있는 관점은 바로 `클럭` 속도를 증가시키는 것이다. 

```
클럭이란, CPU가 동작하는 속도 단위이다.
```

그렇기 때문에, `클럭`속도가 높으면 CPU는 빠르게 동작한다.
그런데 `클럭` 속도가 높아지면 `발열`문제가 발생한다.

## 코어
다음으로 생각해볼 수 있는 방법이 CPU의 코어와 스레드 수를 높이는 것이다.
```
코어란, 명령어를 실행할 수 있는 하드웨어 부품
```

CPU내에 여러개의 코어가 존재하고 이를 멀티코어라고 부른다.
코어가 많다고 해서 성능이 좋아지는 것은 아니고, 적절한 분배가 필요하다!

## 스레드

```
스레드란, 명령어를 실행하는 단위이다.
```

스레드 역시 여러개 있을 수 있고 그것을 멀티스레드라고 한다.
멀티스레드 프로세서란, 여러개의 하드웨어적 스레드를 지원하는 CPU를 말한다. 다시말해 하나의 코어로 여러개의 명령어를 실행할 수 있는 CPU를 의미한다. 이것의 핵심은 바로 `레지스터` 이다.

# 명령어 병렬 처리 기법

## 명령어 파이프라인
일반적으로 명령어를 실행하는 과정은
`명령어 인출 - 명령어 해석 - 명령어 실행 - 결과저장`
으로 이루어진다.

이러한 과정을 `명령어 파이프라인` 이라고 하는데, 과정이 겹치지 않는다면 여러 작업을 처리할 수 있도록 하는 것을 `명령어 파이프라이닝` 이라고 한다.

그러나 모든 명령어가 성공적으로 이루어지는 것은 아니고 중간에 실패할 위험이 있다. 발생할 수 있는 위험의 종류에 대해 알아보자! 

- 데이터 위험 : 명령어간의 의존성때문에 발생
- 제어 위험 : 프로그램 카운터의 갑작스러운 변화에 의해 발생
   - 예를들어, 명령어 실행이 끝나고 프로그램 카운터가 갑자기 다른 주소로 바뀐다면 제어 위험이 발생할 수 있다.
   - 미리 예측하는 기술은 branch prediction(분기예측)도 존재한다.
 - 구조적 위험 : 다른 명령어가 동시에 ALU, 레지스터등 같은 CPU 부품을 사용하려고 할 때 발생

## 슈퍼스칼라
`파이프라이닝`은 단일 파이프라인으로도 구현가능하지만, 오늘날의 CPU 내부에는 여러개의 명령어 파이프라이닝을 가진다. 이를 `슈퍼스칼라`라고 한다.

## 비순차적 명령어 처리
명령어의 실행 순서를 바꾸어 일처리를 효율적으로 하는 방법
의존성이 없는 명령어의 경우 먼저 처리할 수 있다.

# CISC, RISC



| CISC | RISC |
|:----:|:----:|
| 복잡하고 다양한 명령어| 단순하고 적은 명령어 |
|가변 길이 명령어| 고정 길이 명령어|
|다양한 주소 지정 방식 |적은 주소 지정 방식|
| **프로그램을 이루는 명령어의 수가 적음** |**프로그램을 이루는 명령어의 수가 많음**|
| 여러 클럭에 걸쳐 명령어 수행 | 1클럭 내외로 명령어 수행 |
|파이프라이닝 하기 어려움 | 파이프라이닝 하기 쉬움|


그러나, 현재에는 CISC를 활용하더라도 CPU 내부적으로 마이크로명령어 처럼 더 잘게 쪼개어 실행되기 때문에 RISC 처럼 사용되어 단점을 보완한다.
