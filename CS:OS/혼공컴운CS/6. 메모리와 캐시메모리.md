# 6. 메모리와 캐시 메모리

# 학습내용
- RAM 의 특징과 종류
   - RAM, DRAM, SRAM, SDRAM, DDR SDRAM
- 메모리의 주소 공간 
- 캐시메모리

# RAM의 특징과 종류
## RAM
```
RAM은 주기억장치, 메모리라고 하며 전원이 꺼지면 데이터가 삭제되는 휘발성 저장 장치이다.
```

RAM의 용량이 크면 보조기억장치에 접근할 일이 줄어드니까 그만큼 많은 프로그램을 동시에 빠르게 실행할 수 있는 성능이 좋아진다.

## RAM의 종류
### DRAM 
- 동적 RAM 이라고 하며, 전원이 꺼지지 않아도 데이터가 사라지는 RAM으로 다시 저장 (재활성화)이 필요하다.
- 실제 메모리에 사용되는 RAM의 종류이다.
- 소비전력이 낮고, 저렴하고, 집적도가 높아 빽빽하게 대용량 설계에 용이하다.

### SRAM
- 정적 RAM이라고 하며, 전원이 꺼지지 않은 한 데이터가 사라지지 않는 RAM이다.
- 그렇기 때문에 재활성화가 필요없다.
- 소비전력이 높고, 가격이 비싸고, 집적도가 낮아 대용량은 불가하다.

### SDRAM
- DRAM의 진화된 형태로 클럭신호롸 동기화된 RAM이다.

### DDR SDRAM
- SDRAM의 진화된 형태로 가장 대중적으로 사용된다.
- 속도가 빠르고 데이터량이 많다.
- SDRAM을 기준으로 DDR 2배, DDR2 4배, DDR3 8배, DDR4 16배이다.

----
# 메모리의 주소공간
CPU가 실행할 프로그램의 주소를 `논리주소` 라고 하며 메모리가 실제저장되는 주소를 `물리주소` 라고 한다.

- 논리주소는 실행되는 프로그램마다 0번지가 새로 부여된다.
- 물리주소는 메모리 전체의 주소이기때문에 0번지는 1개만 부여된다.

그렇다면, CPU가 실행할 프로그램의 실제 주소, 물리주소를 알기 위해 어떻게 할 수 있을까?

- 바로 `MMU` 라는 메모리 관리 장치를 통해 논리주소를 물리주소로 변경할 수 있다.
- `베이스레지스터`가 `MMU`에 있고 이는 프로그램의 첫 물리주소를 저장한다.
    - CPU가 명령하는 논리주소가 100이고, MMU 베이스 레지스터가 45000이라면 실제 접근하는 물리주소는 45000+100 인 45100 번지의 물리주소에 접근하게 된다.

이때, 논리주소가 한계레지스터가 저장한 값보다 큰 경우 잘못된 물리주소로 접근할 수 있는데 이를 방지하기 위해 `한계레지스터`가 필요하다.

매번 논리주소가 한계레지스터보다 값이 작은지 판단을 하고 값이 큰 경우 메모리에 접근하지 못하도록 막아준다.

----

# 캐시 메모리
```
CPU와 메모리 사이에 위치하는 캐시메모리
주로 CPU가 자주 접근하는 값들을 저장한다.
```

## 저장 장치 계층 구조

- CPU와 가까운 저장 장치는 빠르고, 멀리있는 장치는 느리다.
- 속도가 빠른 저장장치는 저장 용량이 작고, 가격이 비싸다

이 원리로 계층구조가 만들어졌고 최상위 층이 레지스터 - 메모리 - 보조기억장치로 구성된다.
이때 캐시메모리는 레지스터와 메모리 사이에 위치한다.
최종적으로 
`레지스터 - 캐시메모리 - 메모리 - 보조기억장치`의 순으로 계층구조가 이루어져 있다.

- 캐시메모리는 L1, L2, L3 로 계층적으로 이루어져있고 주로, L1, L2는 코어 안에 위치하고 L3는 외부에 위치한다.

캐시메모리에는 어떤 데이터가 저장될까?
- CPU가 자주 접할것 같은 데이터를 미리 예측해서 저장한다.
- 이때, 예측한 데이터가 맞으면 `캐시히트`라고 하고, 예측이 틀리면 `캐시미스`라고 한다.
- `캐시적중률`은 `캐시히트 횟수 / (캐시히트 횟수 + 캐시미스 횟수)`로 계산할 수 있다.

### 참조 지역성 원리
- CPU는 최근에 접근했던 메모리 공간에 다시 접근하려는 경향이 있다.
- CPU는 접근한 메모리 공간 근처를 접근하려는 경향이 있다.

이 두가지 원리를 가지고 캐시메모리에 저장할 데이터를 예측할 수 있다.
