# 12. 프로세스 동기화

## 학습내용
- 동기화 개념
- 용어 정리 (공유자원, 임계구역, 상호배제)
- 동기화 기법 (뮤텍스 락, 세마포, 모니터)

## 동기화란
```
프로세스 동기화란, 프로세스들 사이의 수행 시기를 맞추는 것을 뜻함
- 실행 순서 제어 : 프로세스의 실행 순서를 제어
- 상호 배제 : 동시에 접근하면 안되는 자원에 하나의 프로세스만 접근하도록 제어
```

### 실행 순서 제어 동기화
A 프로세스와 B 프로세스가 있을 때, B 프로세스는 반드시 A 프로세스가 실행되고 나서 실행되어야 하는 경우
이 둘의 프로세스 실행 순서는 제어하는 동기화

### 상호 배제를 위한 동기화 
공유가 불가능한 자원의 동시 사용을 피하기 위한 알고리즘
- 생산자와 소비자 문제
- 공유자원과 임계구역
   - 공유자원 : 프로세스가 서로 공유하는 자원
   - 임계구역 : 동시에 실행하는 문제가 발생하는 자원에 접근하는 코드 영역
   - 레이스컨디션 : 동시 다발적인 임계구역의 코드를 실행하여 발생하는 문제

### 상호 배제를 위한 3가지 동기화 원칙
1. 상호배제 : 한 프로세스가 임계구역에 진입했을 때, 다른 자원은 진입할 수 없다.
2. 진행 : 임계 구역에 어떤 프로세스도 들어와있지 않다면, 임계 구역에 진입하고자 하는 프로세스는 진입할 수 있다.
3. 유한 대기 : 언젠가 임계 구역이 비어있을 때, 프로세스가 진입할 수 있다.


## 동기화 기법

### 뮤텍스 락
상호배제를 위한 동기화 도구
하나의 자원에 접근하는 프로세스를 관리한다.

- 하나의 전역변수 
- 두개의 함수 acquire(), release() 
   - acquire는 임계구역에 진입하기 전에 호출하는 함수로 임계구역이 열릴때 까지 반복적으로 확인하고 진입하면서 lock을 건다.
   - release는 임계구역에서 나오면서 호출하는 함수로 lock -> false로 바꿔준다.

단점으로, 계속해서 임계구역을 확인하는 바쁜 대기상태가 있다.

### 세마포
실행 순서 제어, 상호배제를 위한 동기화 도구
하나의 자원이 아닌 여러개의 자원에 접근하는 프로세스를 관리한다.

- 하나의 전역변수
- 두개의 함수 wait(), signal()

프로세스 A가 B보다 먼저 실행되도록 하려면 A뒤에 signal() B 앞에 wait(), 전역변수 S=0으로 두면된다.

### 모니터
공유자원을 다루는 인터페이스에 접근하기 위한 큐 (모니터 진입을 위한 큐)
모니터 안에 항상 하나의 프로세스만 들어오도록 하여 상호 배제를 위한 동기화를 제공한다.
- 특정 프로세스가 아직 실행 조건이 되지 않았을 때 wait을 통해 실행 중단
- 특정 프로세스가 실행될 조건이 충족되었을 때는 signal을 통해 실행 재개
