# 13. 교착상태

## 학습내용
- 교착상태 
- 자원 할당 그래프
- 교착상태 발생 원인
- 교착상태 해결방안
   - 예방
   - 회피
   - 회복
   - 무시

## 교착상태란,
```
일어나지 않을 실행을 한없이 기다리는 상태
어떠한 프로세스도 실행되지 않는 상태
```

- 교착상태는 자원할당그래프로 쉽게 확인할 수 있다.
- 자원할당그래프 그리는 방법
   - 프로세스는 원으로, 자원의 종류는 사각형으로 표현
   - 사용할 수 있는 자원의 개수는 사각형 내의 점으로 표현
   - 프로세스가 자원을 할당 중이라면 화살표로 표시 `자원 -> 프로세스` 
   - 자원을 기다리고 있다면 `프로세스 -> 자원`
   - 원형으로 그려지면 교착상태!

## 발생조건
교착상태에 빠지게되는 4가지 조건이 있으며 모두 충족할 때, 교착상태에 빠지게 된다.
만약 하나라도 해당되지 않으면 교착상태에 빠지지 않는다.

### 상호배제
동기화에서 다뤘듯이 하나의 프로세스가 하나의 자원이 접근할 수 있어 다른 프로세스가 자원에 접근할 수 없는 상황을 말한다.

### 점유와 대기
하나의 프로세스가 다른 자원을 점유하고 있으면서 또 다른 자원을 기다리는 상황을 말한다.

### 비선점
강제로 자원을 뺏지 못하는 경우를 말한다.

### 원형대기
프로세스들이 원의 형태로 자원을 무한정 대기하는 상황을 말한다.

## 해결방법

### 예방
교착상태가 애초에 발생하지 않도록 하는 방법이다.
위에서 언급한 교착상태가 발생할 4가지 조건이 일어나지 않도록 하는 것이다!!
- 상호배제, 점유와 대기, 비선점, 원형대기

- 상호배제는 현실적으로 모든 자원을 없애기 어려워 불가능하다.
- 점유와 대기는 자원의 활용률이 낮아지는 단점이 있다.
- 비선점은 선점형 자원의 경우 가능하다 비선점형 자원처럼 무조건 하나의 프로세스가 끝나야 다음 프로세스가 실행가능한 경우에는 불가능한 단점이 있다.
- 원형대기는 번호를 부여하는 방식으로 위의 3가지 보다 보편적이지만 모든 자원에 번호를 부여하고 어떤 순서대로 번호를 부여하는지 판단하는데 어려움이 있다.

### 회피
애초에 교착상태가 발생하지 않도록 조심해서 자원을 사용하는 방법이다.
`안전 순서열` : 교착상태 없이 안전하게 프로세스들에 자원을 할당할 수 있는 순서를 의미한다.

안전 순서열이 없는 상태는 불안정상태라 하며 교착상태를 회피하기 어려울 수 있다!

### 회복

- 선점을 통한 회복 : 교착상태가 해결될 때까지 한 프로세스씩 자원을 몰아주는 방식
- 강제 종료를 통한 회복 : 교착상태에 높은 프로세스 모두를 종료 / 하나씩 해결될 때까지 종료하는 방법이 있음

### 무시
때로는 최대 효율을 추구하는 방향을 따졌을 때, 무시하는게 해결책이 될 수도 있다!
